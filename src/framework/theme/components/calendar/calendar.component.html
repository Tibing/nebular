<nb-card>
  <nb-card-header>
    <nb-calendar-header></nb-calendar-header>
  </nb-card-header>

  <nb-card-body [ngSwitch]="activeViewMode">

    <ng-container *ngSwitchCase="ViewMode.DATE">

      <nb-calendar-pageable-navigation
        *ngSwitchCase="ViewMode.DATE"
        [date]="activeMonth"
        (next)="nextMonth()"
        (prev)="prevMonth()"
        (changeMode)="setViewMode(ViewMode.YEAR)">
      </nb-calendar-pageable-navigation>

      <nb-calendar-day-picker
        [activeMonth]="activeMonth"
        [boundingMonths]="boundingMonth"
        [value]="date"
        (valueChange)="dateChange.emit($event)">

        <ng-container *ngIf="dayCell">
          <ng-container *nbCalendarDay="let context">
            <ng-container *ngTemplateOutlet="dayCell.template, context: {$implicit: context}"></ng-container>
          </ng-container>
        </ng-container>

      </nb-calendar-day-picker>

    </ng-container>

    <ng-container *ngSwitchCase="ViewMode.YEAR">

      <nb-calendar-pageable-navigation
        [date]="activeMonth"
        (next)="nextYears()"
        (prev)="prevYears()"
        (changeMode)="setViewMode(ViewMode.DATE)">
      </nb-calendar-pageable-navigation>

      <nb-calendar-year-picker
        [value]="activeYear"
        (valueChange)="setActiveMonth($event); setViewMode(ViewMode.MONTH)">
      </nb-calendar-year-picker>

    </ng-container>

    <ng-container *ngSwitchCase="ViewMode.MONTH">

      <nb-calendar-navigation [date]="activeMonth" (changeMode)="setViewMode(ViewMode.DATE)"></nb-calendar-navigation>

      <nb-calendar-month-picker
        [value]="activeMonth"
        (valueChange)="setActiveMonth($event); setViewMode(ViewMode.DATE)">

        <ng-container *ngIf="monthCell">
          <ng-container *nbCalendarMonth="let context">
            <ng-container *ngTemplateOutlet="monthCell.template, context: {$implicit: context}"></ng-container>
          </ng-container>
        </ng-container>

      </nb-calendar-month-picker>

    </ng-container>

  </nb-card-body>

</nb-card>
